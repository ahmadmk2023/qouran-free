<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.1/howler.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://i.imgur.com/XBPOinp.png" rel="icon" type="image/x-icon">
    <title>القرآن الكريم كاملاً MP3 - الشيخ سعد الغامدي</title>

    <style>
        /* الخطوط */
        @import url('https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;700&display=swap');

        /* التنسيقات العامة للجسم */
        body {
            margin: 0;
            font-family: 'El Messiri', 'Roboto', Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffc266;
            direction: rtl;
            overflow: hidden; /* منع التمرير على مستوى الجسم بالكامل */
        }
        /* شريط التمرير (عام) */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey;
            border-radius: 7px;
        }
        ::-webkit-scrollbar-thumb {
            background-image: linear-gradient(180deg, #d0368a 0%, #708ad4 99%);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b30000;
        }
        /* شريط التنقل العلوي */
        .topnav {
            position: fixed;
            overflow: hidden;
            border-radius: 0 0 10px 10px;
            background-image: linear-gradient(132deg, #2a2a2a 0%, #464646 100%);
            z-index: 1000;
            top: 0;
            height: 60px;
            width: 100%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            box-sizing: border-box;
        }

        .topnav a {
            color: #ffffff;
            text-align: center;
            padding: 10px 15px;
            text-decoration: none;
            font-size: 18px;
            border-radius: 8px;
            transition: background-color 0.3s ease, color 0.3s ease, border 0.3s ease;
        }

        .topnav a:focus,
        .topnav a:hover {
            background-color: #555;
            color: #eee;
            outline: none;
            border: 2px solid #ff0066;
        }

        .topnav-centered {
            flex-grow: 1;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: #fff;
        }

        .topnav-right {
            display: flex;
        }

        /* الاستجابة لشاشات الأجهزة المحمولة */
        @media screen and (max-width: 768px) {
            .topnav {
                height: 55px;
                padding: 0 10px;
            }
            .topnav a {
                font-size: 16px;
                padding: 8px 12px;
            }
            .topnav-centered {
                font-size: 18px;
            }
        }

        /* تنسيقات المشغل الرئيسي */
        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            height: 100vh;
            overflow: hidden; /* لمنع التمرير على Main */
        }

        .player-ctn {
            /* التعديلات الرئيسية لتقليل الارتفاع */
            height: 165px; /* الارتفاع المطلوب */
            overflow: hidden; /* لمنع المحتوى من تجاوز الارتفاع المحدد */
            width: 95%;
            max-width: 380px; /* تحديد أقصى عرض ليكون أكثر إحكاماً */
            padding: 8px; /* تقليل التباعد الداخلي */
           
            border-radius: 15px;
            border: 1.5px solid #faa61a;
            background-image: linear-gradient(to right, #2a2a2a, #0a0a0a);
            color: #fff;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column; /* يبقى عمودياً لتجميع الأقسام (صورة/نص، شريط، أزرار) */
            align-items: center;
            position: fixed;
            top: 10px; /* سيتغير هذا بناءً على ارتفاع الشريط العلوي */
            left: 50%;
            transform: translateX(-50%);
            z-index: 999;
            box-sizing: border-box;
        }

        /* شريط البحث (موقعه أعلى المشغل) */
        #searchbar {
            margin: 0;
            padding: 8px;
            font-size: 15px;
            font-weight: bold;
            border-radius: 8px;
            width: 90%;
            max-width: 320px;
            border: 1.5px solid gold;
            background-color: #2a2a2a;
            color: #fff;
            box-sizing: border-box;
            display: none;
            text-align: right;
            position: fixed;
            /* حساب الموضع الجديد لشريط البحث */
            top: calc(60px + 120px + 10px); /* ارتفاع الـtopnav + ارتفاع المشغل + مسافة */
            left: 50%;
            transform: translateX(-50%);
            z-index: 999;
        }

        #searchbar.show {
            display: block;
        }

        #searchbar::placeholder {
            color: #aaa;
        }

        #searchbar:focus, #searchbar:hover {
            background: #444;
            color: #fff;
            border: 2px solid #ff0066;
            outline: none;
        }

        .music-info {
            /* تغيير الاتجاه ليصبح أفقيًا للصورة والمعلومات */
            display: flex;
            flex-direction: row; /* الصورة والمعلومات جنباً إلى جنب */
            justify-content: flex-start; /* تبدأ من اليمين في RTL */
            align-items: center;
            width: 100%; /* تأكد أنها تأخذ العرض الكامل للمشغل */
            margin-bottom: 5px; /* مسافة بسيطة قبل شريط التقدم */
            gap: 10px; /* مسافة بين الصورة والمعلومات */
        }

        #cover-image {
            width: 60px; /* تصغير حجم الصورة أكثر */
            height: 60px;
            border-radius: 50%;
            border: 2px solid #6597e7; /* تصغير سمك الحدود */
            margin-bottom: 0; /* لا يوجد هامش سفلي */
            object-fit: cover;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.5s ease-in-out;
        }

        #cover-image.rotating {
            animation: spin 8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .track-info {
            flex-grow: 1; /* السماح للمعلومات بأخذ المساحة المتبقية */
            text-align: right; /* محاذاة النص لليمين */
            margin-top: 0; /* إزالة أي هامش علوي */
            padding-left: 5px; /* مسافة بسيطة من الصورة */
        }

        .title {
            font-size: 15px; /* تصغير حجم الخط */
            font-weight: 700;
            color: #fff;
            margin-bottom: 1px; /* تقليل الهامش السفلي */
            white-space: nowrap; /* منع النص من الانكسار إلى سطر جديد */
            overflow: hidden; /* إخفاء أي نص زائد */
            text-overflow: ellipsis; /* إضافة نقاط (...) للنص الزائد */
        }

        .artist {
            font-size: 12px; /* تصغير حجم الخط */
            color: #faa61a;
            margin-top: 1px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .title1 {
            font-size: 10px; /* تصغير حجم الخط */
            color: #6597e7;
            margin-top: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* شريط التقدم */
        .infos-ctn {
            width: 100%; /* تأخذ العرض الكامل */
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 5px; /* مسافة بسيطة قبل الأزرار */
        }

        .timer, .duration {
            font-size: 10px; /* تصغير حجم الخط للوقت */
            color: #fff;
            font-weight: bold;
            min-width: 35px; /* لضمان عدم تكسر الوقت */
            text-align: center;
        }

        #myProgress {
            flex-grow: 1;
            height: 2px; /* شريط تقدم أرفع */
            background-color: #444;
            cursor: pointer;
            border-radius: 10px;
            margin: 0 4px; /* تقليل الهامش الأفقي */
        }

        #myBar {
            width: 0%;
            height: 100%;
            background-color: #ff0066;
            border-radius: 10px;
        }

        /* أزرار التحكم */
        .btn-ctn {
            width: 100%; /* تأخذ العرض الكامل */
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px; /* تقليل المسافة بين الأزرار أكثر */
            margin-bottom: 0; /* لا يوجد هامش سفلي */
        }

        .btn-action, .btn-play, .btn-mute {
            cursor: pointer;
            width: 30px; /* تصغير حجم الأزرار أكثر */
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            background-color: #3d3d3d;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s ease, border 0.3s ease, transform 0.2s ease;
        }

        .btn-action:active, .btn-play:active, .btn-mute:active {
            transform: scale(0.9);
        }

        #remot:focus, #remot:hover {
            background: #555;
            border: 2px solid #ff0066;
            outline: none;
        }

        #remot i {
            color: #fff;
            font-size: 14px; /* تصغير حجم الأيقونات */
            transition: color 0.3s ease;
        }

        #remot i:hover, #remot i:focus {
            color: #ffc266;
        }
            
        /* قائمة السور (أصبحت ثابتة) */
        .playlist-ctn {
            position: fixed; /* لتثبيت القائمة */
            /* حساب الموضع الجديد لقائمة السور */
            top: calc(60px + 50px + 10px + 40px + 50px); /* ارتفاع الـtopnav + ارتفاع المشغل + مسافة بينهما + ارتفاع شريط البحث + مسافة */
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 350px; /* نفس عرض المشغل للتناسق */
            /* حساب الارتفاع الجديد ليملأ المساحة المتبقية */
            border: 1.5px solid #6597e7;
            border-radius: 15px;              
            margin-top: 22px; /* تترك مساحة للشريط العلوي */
            background-image: linear-gradient(to right, #2a2a2a, #0a0a0a);
            padding: 10px;
            overflow-y: auto; /* التمرير فقط داخل هذه القائمة */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
            padding-left: 5px; /* مسافة لل scrollbarE */
            box-sizing: border-box;
            z-index: 99; /* أقل من المشغل ولكن أعلى من الخلفية */
        }

        @media screen and (max-width: 768px) {
            .player-ctn {
                margin-top: 60px; /* ضبط الهامش العلوي للجوال */
            }
            #searchbar {
                top: calc(55px + 120px + 10px); /* ارتفاع الـtopnav للجوال + ارتفاع المشغل + مسافة */
            }
            .playlist-ctn {
                top: calc(55px + 120px + 10px + 40px + 10px); /* ارتفاع الـtopnav للجوال + ارتفاع المشغل + مسافة + ارتفاع شريط البحث + مسافة */
                height: calc(100vh - (55px + 120px + 10px + 40px + 10px + 20px)); /* تحديث الارتفاع ليملأ المساحة المتبقية */
            }
        }


        .playlist-track-ctn {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            padding: 10px 15px;
            border: 1px solid #4a4a4a;
            transition: background 0.3s ease, color 0.3s ease, border 0.3s ease;
        }

        .playlist-track-ctn:hover,
        .playlist-track-ctn:focus {
            background: #ff0066;
            color: #fff;
            border: 2px solid #ffc266;
            outline: none;
        }

        .playlist-track-ctn:last-child {
            margin-bottom: 0;
        }

        .playlist-info-track,
        .playlist-duration {
            font-size: 15px;
            color: #eee;
            pointer-events: none;
        }

        .active-track {
            background: #ff0066;
            color: #fff !important;
            font-weight: bold;
            border: 2px solid #ffc266;
            box-shadow: 0 0 10px rgba(255, 0, 102, 0.5);
        }

        .playlist-btn-play .fas {
            font-size: 16px;
            color: #fff;
        }

        .playlist-btn-play {
            padding-top: 0;
            padding-bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #555;
        }
            
        .active-track .playlist-btn-play {
            background-color: #ffc266;
        }

        .active-track .playlist-btn-play .fas {
            color: #333;
        }

        /* شريط التمرير الخاص بالقائمة */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background-image: linear-gradient(180deg, #ff0066 0%, #faa61a 99%);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-image: linear-gradient(180deg, #ff3388 0%, #ffbb44 99%);
        }

        .playlist-track-ctn.hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <div class="topnav">
        <a href="go:01"><i class="fa fa-reply" style="font-size: 22px;"></i></a>
        <div class="topnav-centered">
            <a><h5>سعد الغامدي</h5></a>
        </div>
        <div class="topnav-right">
            <a tabindex="1" href="javascript:void(0)" onclick="toggleSearchBar()">
                <i class="fa fa-search"></i>
            </a>
        </div>
    </div>

    <audio id="myAudio" ontimeupdate="onTimeUpdate()">
        <source id="source-audio" src="" type="audio/mpeg">
        متصفحك لا يدعم عنصر الصوت.
    </audio>

    <main>
        <div align="center">
            <input id="searchbar" onkeyup="search_surah()" type="text" name="search"
                placeholder=" ابحث عن سورة -- أو رقم سورة..." tabindex="1">
        </div>

        <div class="player-ctn">
            <div class="music-info">
                <img src="https://i.imgur.com/ldiBgPN.jpg" alt="Cover Image" id="cover-image">
                <div class="track-info">
                    <h2 class="title" id="track-title">سورة الفاتحة</h2>
                    <center><span class="artist" id="track-artist">الشيخ سعد الغامدي</span></center>
                    <h5 class="title1">حفص عن عاصم</h5>
                </div>
            </div>

            <div class="infos-ctn">
                <div class="timer">00:00</div>
                <div id="myProgress">
                    <div id="myBar"></div>
                </div>
                <div class="duration">00:00</div>
            </div>

            <div class="btn-ctn">
                <div class="btn-action first-btn" id="remot" tabindex="1" onclick="previous()">
                    <div id="btn-faws-back">
                        <i class='fas fa-step-backward'></i>
                    </div>
                </div>
                <div class="btn-action" id="remot" tabindex="1" onclick="rewind()">
                    <div id="btn-faws-rewind">
                        <i class='fas fa-backward'></i>
                    </div>
                </div>
                <div class="btn-action" id="remot" tabindex="1" onclick="toggleAudio()">
                    <div id="btn-faws-play-pause">
                        <i class='fas fa-play' id="icon-play"></i>
                        <i class='fas fa-pause' id="icon-pause" style="display: none"></i>
                    </div>
                </div>
                <div class="btn-play" id="remot" tabindex="1" onclick="forward()">
                    <div id="btn-faws-forward">
                        <i class='fas fa-forward'></i>
                    </div>
                </div>
                <div class="btn-action" id="remot" tabindex="1" onclick="next()">
                    <div id="btn-faws-next">
                        <i class='fas fa-step-forward'></i>
                    </div>
                </div>
                <div class="btn-mute" id="remot" tabindex="1" id="toggleMute" onclick="toggleMute()">
                    <div id="btn-faws-volume">
                        <i id="icon-vol-up" class='fas fa-volume-up'></i>
                        <i id="icon-vol-mute" class='fas fa-volume-mute' style="display: none"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="playlist-ctn" tabindex="1"></div>

        </main>

    <script>
        // تعريف قائمة السور
        var listAudio = [
            { name: "سورة الفاتحة", file: "https://listen.ourquraan.com/Saad_Alghamdi/001.mp3", surah_number: "001" },
            { name: "سورة البقرة", file: "https://listen.ourquraan.com/Saad_Alghamdi/002.mp3", surah_number: "002" },
            { name: "سورة آل عمران", file: "https://listen.ourquraan.com/Saad_Alghamdi/003.mp3", surah_number: "003" },
            { name: "سورة النساء", file: "https://listen.ourquraan.com/Saad_Alghamdi/004.mp3", surah_number: "004" },
            { name: "سورة المائدة", file: "https://listen.ourquraan.com/Saad_Alghamdi/005.mp3", surah_number: "005" },
            { name: "سورة الأنعام", file: "https://listen.ourquraan.com/Saad_Alghamdi/006.mp3", surah_number: "006" },
            { name: "سورة الأعراف", file: "https://listen.ourquraan.com/Saad_Alghamdi/007.mp3", surah_number: "007" },
            { name: "سورة الأنفال", file: "https://listen.ourquraan.com/Saad_Alghamdi/008.mp3", surah_number: "008" },
            { name: "سورة التوبة", file: "https://listen.ourquraan.com/Saad_Alghamdi/009.mp3", surah_number: "009" },
            { name: "سورة يونس", file: "https://listen.ourquraan.com/Saad_Alghamdi/010.mp3", surah_number: "010" },
            { name: "سورة هود", file: "https://listen.ourquraan.com/Saad_Alghamdi/011.mp3", surah_number: "011" },
            { name: "سورة يوسف", file: "https://listen.ourquraan.com/Saad_Alghamdi/012.mp3", surah_number: "012" },
            { name: "سورة الرعد", file: "https://listen.ourquraan.com/Saad_Alghamdi/013.mp3", surah_number: "013" },
            { name: "سورة إبراهيم", file: "https://listen.ourquraan.com/Saad_Alghamdi/014.mp3", surah_number: "014" },
            { name: "سورة الحجر", file: "https://listen.ourquraan.com/Saad_Alghamdi/015.mp3", surah_number: "015" },
            { name: "سورة النحل", file: "https://listen.ourquraan.com/Saad_Alghamdi/016.mp3", surah_number: "016" },
            { name: "سورة الإسراء", file: "https://listen.ourquraan.com/Saad_Alghamdi/017.mp3", surah_number: "017" },
            { name: "سورة الكهف", file: "https://listen.ourquraan.com/Saad_Alghamdi/018.mp3", surah_number: "018" },
            { name: "سورة مريم", file: "https://listen.ourquraan.com/Saad_Alghamdi/019.mp3", surah_number: "019" },
            { name: "سورة طه", file: "https://listen.ourquraan.com/Saad_Alghamdi/020.mp3", surah_number: "020" },
            { name: "سورة الأنبياء", file: "https://listen.ourquraan.com/Saad_Alghamdi/021.mp3", surah_number: "021" },
            { name: "سورة الحج", file: "https://listen.ourquraan.com/Saad_Alghamdi/022.mp3", surah_number: "022" },
            { name: "سورة المؤمنون", file: "https://listen.ourquraan.com/Saad_Alghamdi/023.mp3", surah_number: "023" },
            { name: "سورة النور", file: "https://listen.ourquraan.com/Saad_Alghamdi/024.mp3", surah_number: "024" },
            { name: "سورة الفرقان", file: "https://listen.ourquraan.com/Saad_Alghamdi/025.mp3", surah_number: "025" },
            { name: "سورة الشعراء", file: "https://listen.ourquraan.com/Saad_Alghamdi/026.mp3", surah_number: "026" },
            { name: "سورة النمل", file: "https://listen.ourquraan.com/Saad_Alghamdi/027.mp3", surah_number: "027" },
            { name: "سورة القصص", file: "https://listen.ourquraan.com/Saad_Alghamdi/028.mp3", surah_number: "028" },
            { name: "سورة العنكبوت", file: "https://listen.ourquraan.com/Saad_Alghamdi/029.mp3", surah_number: "029" },
            { name: "سورة الروم", file: "https://listen.ourquraan.com/Saad_Alghamdi/030.mp3", surah_number: "030" },
            { name: "سورة لقمان", file: "https://listen.ourquraan.com/Saad_Alghamdi/031.mp3", surah_number: "031" },
            { name: "سورة السجدة", file: "https://listen.ourquraan.com/Saad_Alghamdi/032.mp3", surah_number: "032" },
            { name: "سورة الأحزاب", file: "https://listen.ourquraan.com/Saad_Alghamdi/033.mp3", surah_number: "033" },
            { name: "سورة سبأ", file: "https://listen.ourquraan.com/Saad_Alghamdi/034.mp3", surah_number: "034" },
            { name: "سورة فاطر", file: "https://listen.ourquraan.com/Saad_Alghamdi/035.mp3", surah_number: "035" },
            { name: "سورة يس", file: "https://listen.ourquraan.com/Saad_Alghamdi/036.mp3", surah_number: "036" },
            { name: "سورة الصافات", file: "https://listen.ourquraan.com/Saad_Alghamdi/037.mp3", surah_number: "037" },
            { name: "سورة ص", file: "https://listen.ourquraan.com/Saad_Alghamdi/038.mp3", surah_number: "038" },
            { name: "سورة الزمر", file: "https://listen.ourquraan.com/Saad_Alghamdi/039.mp3", surah_number: "039" },
            { name: "سورة غافر", file: "https://listen.ourquraan.com/Saad_Alghamdi/040.mp3", surah_number: "040" },
            { name: "سورة فصلت", file: "https://listen.ourquraan.com/Saad_Alghamdi/041.mp3", surah_number: "041" },
            { name: "سورة الشورى", file: "https://listen.ourquraan.com/Saad_Alghamdi/042.mp3", surah_number: "042" },
            { name: "سورة الزخرف", file: "https://listen.ourquraan.com/Saad_Alghamdi/043.mp3", surah_number: "043" },
            { name: "سورة الدخان", file: "https://listen.ourquraan.com/Saad_Alghamdi/044.mp3", surah_number: "044" },
            { name: "سورة الجاثية", file: "https://listen.ourquraan.com/Saad_Alghamdi/045.mp3", surah_number: "045" },
            { name: "سورة الأحقاف", file: "https://listen.ourquraan.com/Saad_Alghamdi/046.mp3", surah_number: "046" },
            { name: "سورة محمد", file: "https://listen.ourquraan.com/Saad_Alghamdi/047.mp3", surah_number: "047" },
            { name: "سورة الفتح", file: "https://listen.ourquraan.com/Saad_Alghamdi/048.mp3", surah_number: "048" },
            { name: "سورة الحجرات", file: "https://listen.ourquraan.com/Saad_Alghamdi/049.mp3", surah_number: "049" },
            { name: "سورة ق", file: "https://listen.ourquraan.com/Saad_Alghamdi/050.mp3", surah_number: "050" },
            { name: "سورة الذاريات", file: "https://listen.ourquraan.com/Saad_Alghamdi/051.mp3", surah_number: "051" },
            { name: "سورة الطور", file: "https://listen.ourquraan.com/Saad_Alghamdi/052.mp3", surah_number: "052" },
            { name: "سورة النجم", file: "https://listen.ourquraan.com/Saad_Alghamdi/053.mp3", surah_number: "053" },
            { name: "سورة القمر", file: "https://listen.ourquraan.com/Saad_Alghamdi/054.mp3", surah_number: "054" },
            { name: "سورة الرحمن", file: "https://listen.ourquraan.com/Saad_Alghamdi/055.mp3", surah_number: "055" },
            { name: "سورة الواقعة", file: "https://listen.ourquraan.com/Saad_Alghamdi/056.mp3", surah_number: "056" },
            { name: "سورة الحديد", file: "https://listen.ourquraan.com/Saad_Alghamdi/057.mp3", surah_number: "057" },
            { name: "سورة المجادلة", file: "https://listen.ourquraan.com/Saad_Alghamdi/058.mp3", surah_number: "058" },
            { name: "سورة الحشر", file: "https://listen.ourquraan.com/Saad_Alghamdi/059.mp3", surah_number: "059" },
            { name: "سورة الممتحنة", file: "https://listen.ourquraan.com/Saad_Alghamdi/060.mp3", surah_number: "060" },
            { name: "سورة الصف", file: "https://listen.ourquraan.com/Saad_Alghamdi/061.mp3", surah_number: "061" },
            { name: "سورة الجمعة", file: "https://listen.ourquraan.com/Saad_Alghamdi/062.mp3", surah_number: "062" },
            { name: "سورة المنافقون", file: "https://listen.ourquraan.com/Saad_Alghamdi/063.mp3", surah_number: "063" },
            { name: "سورة التغابن", file: "https://listen.ourquraan.com/Saad_Alghamdi/064.mp3", surah_number: "064" },
            { name: "سورة الطلاق", file: "https://listen.ourquraan.com/Saad_Alghamdi/065.mp3", surah_number: "065" },
            { name: "سورة التحريم", file: "https://listen.ourquraan.com/Saad_Alghamdi/066.mp3", surah_number: "066" },
            { name: "سورة الملك", file: "https://listen.ourquraan.com/Saad_Alghamdi/067.mp3", surah_number: "067" },
            { name: "سورة القلم", file: "https://listen.ourquraan.com/Saad_Alghamdi/068.mp3", surah_number: "068" },
            { name: "سورة الحاقة", file: "https://listen.ourquraan.com/Saad_Alghamdi/069.mp3", surah_number: "069" },
            { name: "سورة المعارج", file: "https://listen.ourquraan.com/Saad_Alghamdi/070.mp3", surah_number: "070" },
            { name: "سورة نوح", file: "https://listen.ourquraan.com/Saad_Alghamdi/071.mp3", surah_number: "071" },
            { name: "سورة الجن", file: "https://listen.ourquraan.com/Saad_Alghamdi/072.mp3", surah_number: "072" },
            { name: "سورة المزمل", file: "https://listen.ourquraan.com/Saad_Alghamdi/073.mp3", surah_number: "073" },
            { name: "سورة المدثر", file: "https://listen.ourquraan.com/Saad_Alghamdi/074.mp3", surah_number: "074" },
            { name: "سورة القيامة", file: "https://listen.ourquraan.com/Saad_Alghamdi/075.mp3", surah_number: "075" },
            { name: "سورة الإنسان", file: "https://listen.ourquraan.com/Saad_Alghamdi/076.mp3", surah_number: "076" },
            { name: "سورة المرسلات", file: "https://listen.ourquraan.com/Saad_Alghamdi/077.mp3", surah_number: "077" },
            { name: "سورة النبأ", file: "https://listen.ourquraan.com/Saad_Alghamdi/078.mp3", surah_number: "078" },
            { name: "سورة النازعات", file: "https://listen.ourquraan.com/Saad_Alghamdi/079.mp3", surah_number: "079" },
            { name: "سورة عبس", file: "https://listen.ourquraan.com/Saad_Alghamdi/080.mp3", surah_number: "080" },
            { name: "سورة التكوير", file: "https://listen.ourquraan.com/Saad_Alghamdi/081.mp3", surah_number: "081" },
            { name: "سورة الانفطار", file: "https://listen.ourquraan.com/Saad_Alghamdi/082.mp3", surah_number: "082" },
            { name: "سورة المطففين", file: "https://listen.ourquraan.com/Saad_Alghamdi/083.mp3", surah_number: "083" },
            { name: "سورة الانشقاق", file: "https://listen.ourquraan.com/Saad_Alghamdi/084.mp3", surah_number: "084" },
            { name: "سورة البروج", file: "https://listen.ourquraan.com/Saad_Alghamdi/085.mp3", surah_number: "085" },
            { name: "سورة الطارق", file: "https://listen.ourquraan.com/Saad_Alghamdi/086.mp3", surah_number: "086" },
            { name: "سورة الأعلى", file: "https://listen.ourquraan.com/Saad_Alghamdi/087.mp3", surah_number: "087" },
            { name: "سورة الغاشية", file: "https://listen.ourquraan.com/Saad_Alghamdi/088.mp3", surah_number: "088" },
            { name: "سورة الفجر", file: "https://listen.ourquraan.com/Saad_Alghamdi/089.mp3", surah_number: "089" },
            { name: "سورة البلد", file: "https://listen.ourquraan.com/Saad_Alghamdi/090.mp3", surah_number: "090" },
            { name: "سورة الشمس", file: "https://listen.ourquraan.com/Saad_Alghamdi/091.mp3", surah_number: "091" },
            { name: "سورة الليل", file: "https://listen.ourquraan.com/Saad_Alghamdi/092.mp3", surah_number: "092" },
            { name: "سورة الضحى", file: "https://listen.ourquraan.com/Saad_Alghamdi/093.mp3", surah_number: "093" },
            { name: "سورة الشرح", file: "https://listen.ourquraan.com/Saad_Alghamdi/094.mp3", surah_number: "094" },
            { name: "سورة التين", file: "https://listen.ourquraan.com/Saad_Alghamdi/095.mp3", surah_number: "095" },
            { name: "سورة العلق", file: "https://listen.ourquraan.com/Saad_Alghamdi/096.mp3", surah_number: "096" },
            { name: "سورة القدر", file: "https://listen.ourquraan.com/Saad_Alghamdi/097.mp3", surah_number: "097" },
            { name: "سورة البينة", file: "https://listen.ourquraan.com/Saad_Alghamdi/098.mp3", surah_number: "098" },
            { name: "سورة الزلزلة", file: "https://listen.ourquraan.com/Saad_Alghamdi/099.mp3", surah_number: "099" },
            { name: "سورة العاديات", file: "https://listen.ourquraan.com/Saad_Alghamdi/100.mp3", surah_number: "100" },
            { name: "سورة القارعة", file: "https://listen.ourquraan.com/Saad_Alghamdi/101.mp3", surah_number: "101" },
            { name: "سورة التكاثر", file: "https://listen.ourquraan.com/Saad_Alghamdi/102.mp3", surah_number: "102" },
            { name: "سورة العصر", file: "https://listen.ourquraan.com/Saad_Alghamdi/103.mp3", surah_number: "103" },
            { name: "سورة الهمزة", file: "https://listen.ourquraan.com/Saad_Alghamdi/104.mp3", surah_number: "104" },
            { name: "سورة الفيل", file: "https://listen.ourquraan.com/Saad_Alghamdi/105.mp3", surah_number: "105" },
            { name: "سورة قريش", file: "https://listen.ourquraan.com/Saad_Alghamdi/106.mp3", surah_number: "106" },
            { name: "سورة الماعون", file: "https://listen.ourquraan.com/Saad_Alghamdi/107.mp3", surah_number: "107" },
            { name: "سورة الكوثر", file: "https://listen.ourquraan.com/Saad_Alghamdi/108.mp3", surah_number: "108" },
            { name: "سورة الكافرون", file: "https://listen.ourquraan.com/Saad_Alghamdi/109.mp3", surah_number: "109" },
            { name: "سورة النصر", file: "https://listen.ourquraan.com/Saad_Alghamdi/110.mp3", surah_number: "110" },
            { name: "سورة المسد", file: "https://listen.ourquraan.com/Saad_Alghamdi/111.mp3", surah_number: "111" },
            { name: "سورة الإخلاص", file: "https://listen.ourquraan.com/Saad_Alghamdi/112.mp3", surah_number: "112" },
            { name: "سورة الفلق", file: "https://listen.ourquraan.com/Saad_Alghamdi/113.mp3", surah_number: "113" },
            { name: "سورة الناس", file: "https://listen.ourquraan.com/Saad_Alghamdi/114.mp3", surah_number: "114" }
        ];

        // وظيفة إنشاء عنصر المسار في القائمة
        // وظيفة إنشاء عنصر المسار في القائمة
        function createTrackItem(index, name, surah_number) {
            var trackItem = document.createElement('div');
            trackItem.setAttribute("class", "playlist-track-ctn");
            trackItem.setAttribute("tabindex", index);
            trackItem.setAttribute("id", "ptc-" + index);
            trackItem.setAttribute("data-index", index);
            document.querySelector(".playlist-ctn").appendChild(trackItem);

            var playBtnItem = document.createElement('div');
            playBtnItem.setAttribute("class", "playlist-btn-play");
            playBtnItem.setAttribute("id", "pbp-" + index);
            trackItem.appendChild(playBtnItem);

            var btnImg = document.createElement('i');
            btnImg.setAttribute("class", "fas fa-play");
            btnImg.setAttribute("id", "p-img-" + index);
            playBtnItem.appendChild(btnImg);

            var trackInfoItem = document.createElement('div');
            trackInfoItem.setAttribute("class", "playlist-info-track");
            trackInfoItem.innerHTML = name;
            trackItem.appendChild(trackInfoItem);

            var trackDurationItem = document.createElement('div');
            trackDurationItem.setAttribute("class", "playlist-duration");
            trackDurationItem.innerHTML = surah_number; // عرض رقم السورة
            trackItem.appendChild(trackDurationItem);
        }

        // إنشاء عناصر القائمة عند تحميل الصفحة
        for (var i = 0; i < listAudio.length; i++) {
            createTrackItem(i, listAudio[i].name, listAudio[i].surah_number);
        }

        var indexAudio = 0; // مؤشر المسار الحالي
        var currentAudio = document.getElementById("myAudio");

        // تحميل مسار صوتي جديد
        function loadNewTrack(index) {
            var player = document.querySelector('#source-audio');
            player.src = listAudio[index].file;
            document.querySelector('.title').innerHTML = listAudio[index].name;
            currentAudio.load();
            toggleAudio(true); // تشغيل الصوت بعد التحميل
            updateStylePlaylist(this.indexAudio, index);
            this.indexAudio = index;
            updateMediaSessionMetadata(index); // تحديث معلومات الميديا
        }

        // إضافة مستمعي الأحداث لعناصر القائمة
        var playListItems = document.querySelectorAll(".playlist-track-ctn");
        for (let i = 0; i < playListItems.length; i++) {
            playListItems[i].addEventListener("click", getClickedElement.bind(this));
        }

        function getClickedElement(event) {
            for (let i = 0; i < playListItems.length; i++) {
                if (playListItems[i] === event.currentTarget) {
                    var clickedIndex = parseInt(event.currentTarget.getAttribute("data-index"));
                    if (clickedIndex === this.indexAudio) {
                        toggleAudio();
                    } else {
                        loadNewTrack(clickedIndex);
                    }
                }
            }
        }

        // تهيئة المشغل لأول مرة
        document.querySelector('#source-audio').src = listAudio[indexAudio].file;
        document.querySelector('.title').innerHTML = listAudio[indexAudio].name;
        currentAudio.load();

        // تحديث مدة الصوت عند التحميل
        currentAudio.onloadedmetadata = function () {
            document.getElementsByClassName('duration')[0].innerHTML = getMinutes(this.duration);
            updateMediaSessionMetadata(indexAudio);
        }.bind(currentAudio);

        // التحكم بالتشغيل والإيقاف المؤقت
        function toggleAudio(forcePlay = false) {
            var coverImage = document.getElementById('cover-image');

            if (currentAudio.paused || forcePlay) {
                document.querySelector('#icon-play').style.display = 'none';
                document.querySelector('#icon-pause').style.display = 'block';
                document.querySelector('#ptc-' + this.indexAudio).classList.add("active-track");
                playToPause(this.indexAudio);
                currentAudio.play();
                coverImage.classList.add('rotating');
            } else {
                document.querySelector('#icon-play').style.display = 'block';
                document.querySelector('#icon-pause').style.display = 'none';
                pauseToPlay(this.indexAudio);
                currentAudio.pause();
                coverImage.classList.remove('rotating');
            }
        }

        // تحديث شريط التقدم والوقت
        var timer = document.getElementsByClassName('timer')[0];
        var barProgress = document.getElementById("myBar");

        function onTimeUpdate() {
            var t = currentAudio.currentTime;
            timer.innerHTML = getMinutes(t);
            setBarProgress();
            if (currentAudio.ended) {
                document.querySelector('#icon-play').style.display = 'block';
                document.querySelector('#icon-pause').style.display = 'none';
                pauseToPlay(this.indexAudio);
                document.getElementById('cover-image').classList.remove('rotating');

                if (this.indexAudio < listAudio.length - 1) {
                    var index = parseInt(this.indexAudio) + 1;
                    loadNewTrack(index);
                } else {
                    currentAudio.currentTime = 0;
                    setBarProgress();
                    timer.innerHTML = "00:00";
                    document.querySelector('#ptc-' + this.indexAudio).classList.remove("active-track");
                    updateMediaSessionMetadata(indexAudio);
                }
            }
        }

        function setBarProgress() {
            var progress = (currentAudio.currentTime / currentAudio.duration) * 100;
            barProgress.style.width = progress + "%";
        }

        function getMinutes(t) {
            var min = parseInt(parseInt(t) / 60);
            var sec = parseInt(t % 60);
            if (sec < 10) {
                sec = "0" + sec;
            }
            if (min < 10) {
                min = "0" + min;
            }
            return min + ":" + sec;
        }

        // البحث في شريط التقدم
        var progressbar = document.querySelector('#myProgress');
        progressbar.addEventListener("click", seek.bind(this));

        function seek(event) {
            var percent = event.offsetX / progressbar.offsetWidth;
            currentAudio.currentTime = percent * currentAudio.duration;
            setBarProgress();
        }

        // تقديم وتأخير الصوت
        function forward() {
            currentAudio.currentTime = currentAudio.currentTime + 5;
            setBarProgress();
        }

        function rewind() {
            currentAudio.currentTime = currentAudio.currentTime - 5;
            setBarProgress();
        }

        // الانتقال للمسار التالي
        function next() {
            if (this.indexAudio < listAudio.length - 1) {
                var oldIndex = this.indexAudio;
                this.indexAudio++;
                updateStylePlaylist(oldIndex, this.indexAudio);
                loadNewTrack(this.indexAudio);
            }
        }

        // الانتقال للمسار السابق
        function previous() {
            if (this.indexAudio > 0) {
                var oldIndex = this.indexAudio;
                this.indexAudio--;
                updateStylePlaylist(oldIndex, this.indexAudio);
                loadNewTrack(this.indexAudio);
            }
        }

        // تحديث النمط في قائمة التشغيل
        function updateStylePlaylist(oldIndex, newIndex) {
            if (document.querySelector('#ptc-' + oldIndex)) {
                document.querySelector('#ptc-' + oldIndex).classList.remove("active-track");
                pauseToPlay(oldIndex);
            }
            document.querySelector('#ptc-' + newIndex).classList.add("active-track");
            playToPause(newIndex);
            // تمرير القائمة تلقائياً لعرض السورة النشطة
            var activeTrackElement = document.getElementById("ptc-" + newIndex);
            if (activeTrackElement) {
                activeTrackElement.scrollIntoView({ behavior: "smooth", block: "nearest" });
            }
        }

        // تغيير أيقونة التشغيل/الإيقاف في القائمة
        function playToPause(index) {
            var ele = document.querySelector('#p-img-' + index);
            if (ele) {
                ele.classList.remove("fa-play");
                ele.classList.add("fa-pause");
            }
        }

        function pauseToPlay(index) {
            var ele = document.querySelector('#p-img-' + index);
            if (ele) {
                ele.classList.remove("fa-pause");
                ele.classList.add("fa-play");
            }
        }

        // كتم الصوت/إلغاء الكتم
        function toggleMute() {
            var volUp = document.querySelector('#icon-vol-up');
            var volMute = document.querySelector('#icon-vol-mute');
            if (currentAudio.muted === false) {
                currentAudio.muted = true;
                volUp.style.display = "none";
                volMute.style.display = "block";
            } else {
                currentAudio.muted = false;
                volMute.style.display = "none";
                volUp.style.display = "block";
            }
        }

        // Media Session API للتحكم من شاشة القفل والإشعارات
        function updateMediaSessionMetadata(index) {
            if ("mediaSession" in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: listAudio[index].name,
                    artist: "الشيخ سعد الغامدي",
                    album: "القرآن الكريم - حفص عن عاصم",
                    artwork: [
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "96x96", type: "image/jpeg" },
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "128x128", type: "image/jpeg" },
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "192x192", type: "image/jpeg" },
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "256x256", type: "image/jpeg" },
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "384x384", type: "image/jpeg" },
                        { src: "https://i.imgur.com/ldiBgPN.jpg", sizes: "512x512", type: "image/jpeg" }
                    ]
                });

                navigator.mediaSession.setActionHandler('play', function () {
                    if (currentAudio.paused) {
                        toggleAudio(true);
                    }
                });

                navigator.mediaSession.setActionHandler('pause', function () {
                    if (!currentAudio.paused) {
                        toggleAudio(false);
                    }
                });

                navigator.mediaSession.setActionHandler('previoustrack', function () {
                    previous();
                });

                navigator.mediaSession.setActionHandler('nexttrack', function () {
                    next();
                });

                navigator.mediaSession.playbackState = currentAudio.paused ? 'paused' : 'playing';
            }
        }

        currentAudio.onplay = function () {
            updateMediaSessionMetadata(indexAudio);
            document.getElementById('cover-image').classList.add('rotating');
        };

        currentAudio.onpause = function () {
            updateMediaSessionMetadata(indexAudio);
            document.getElementById('cover-image').classList.remove('rotating');
        };

        currentAudio.onended = function () {
            updateMediaSessionMetadata(indexAudio);
            document.getElementById('cover-image').classList.remove('rotating');
        };

        // وظائف البحث
        function toggleSearchBar() {
            let searchbar = document.getElementById('searchbar');
            searchbar.classList.toggle('show');
            if (searchbar.classList.contains('show')) {
                searchbar.focus();
            } else {
                let buttons = document.querySelectorAll('.playlist-track-ctn');
                buttons.forEach(button => {
                    button.classList.remove('hidden');
                });
                searchbar.value = '';
            }
        }

        function search_surah() {
            let input = document.getElementById('searchbar').value.trim().toLowerCase();
            let buttons = document.querySelectorAll('.playlist-track-ctn');

            buttons.forEach(button => {
                let surahName = button.querySelector('.playlist-info-track').textContent.toLowerCase();
                let surahNumber = button.querySelector('.playlist-duration').textContent.toLowerCase();

                if (surahName.includes(input) || surahNumber.includes(input)) {
                    button.classList.remove('hidden');
                } else {
                    button.classList.add('hidden');
                }
            });
        }

        window.addEventListener('load', function() {
            updateMediaSessionMetadata(indexAudio);
        });

    </script>
</body>
</html>
